{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\src\\views\\my.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\src\\views\\my.vue","mtime":1568016275023},{"path":"C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport CircleProgress from 'vue-circleprogressbar';\nexport default {\n  name: \"my\",\n  data: function data() {\n    return {\n      myBook: [],\n      returnDate: [],\n      startTime: [],\n      last: [],\n      show: false\n    };\n  },\n  components: {\n    CircleProgress: CircleProgress\n  },\n  computed: {\n    user: function user() {\n      //通过方法访问\n      var user = this.$store.getters.loginMsg.loginUser;\n      var allbook = this.$store.getters.allBook;\n      var that = this;\n      console.log(user.lend.length, user.lend);\n\n      if (user.lend.length > 0) {\n        that.show = true;\n        user.lend.forEach(function (item, index) {\n          console.log(index);\n          that.myBook[index] = allbook.filter(function (book) {\n            return book.number === item.bookId;\n          });\n          var time = new Date(item.startTime);\n          var now = new Date();\n          time.setDate(Number(time.getDate()) + Number(item.day));\n          that.returnDate[index] = time.getFullYear() + '-' + (time.getMonth() + 1) + '-' + time.getDate();\n          that.startTime[index] = item.startTime.getFullYear() + '-' + (item.startTime.getMonth() + 1) + '-' + item.startTime.getDate();\n          var oDate1 = new Date(time.getMonth() + '-' + time.getDate() + '-' + time.getFullYear()); //转换为9-25-2017格式\n\n          var oDate2 = new Date(now.getMonth() + '-' + now.getDate() + '-' + now.getFullYear());\n          var iDays = parseInt(Math.abs(oDate1 - oDate2) / 1000 / 60 / 60 / 24); //把相差的毫秒数转换为天数\n\n          that.last[index] = iDays;\n          console.log(that.last[index], that.myBook);\n        });\n      } else {\n        that.show = false;\n      }\n\n      return user;\n    }\n  }\n};",{"version":3,"sources":["my.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,OAAA,cAAA,MAAA,uBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,IADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,UAAA,EAAA,EAFA;AAGA,MAAA,SAAA,EAAA,EAHA;AAIA,MAAA,IAAA,EAAA,EAJA;AAKA,MAAA,IAAA,EAAA;AALA,KAAA;AAOA,GAVA;AAWA,EAAA,UAAA,EAAA;AACA,IAAA,cAAA,EAAA;AADA,GAXA;AAcA,EAAA,QAAA,EAAA;AACA,IAAA,IAAA,EAAA,gBAAA;AAAA;AACA,UAAA,IAAA,GAAA,KAAA,MAAA,CAAA,OAAA,CAAA,QAAA,CAAA,SAAA;AACA,UAAA,OAAA,GAAA,KAAA,MAAA,CAAA,OAAA,CAAA,OAAA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,EAAA,IAAA,CAAA,IAAA;;AACA,UAAA,IAAA,CAAA,IAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,QAAA,IAAA,CAAA,IAAA,GAAA,IAAA;AACA,QAAA,IAAA,CAAA,IAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA,KAAA,EAAA;AAGA,UAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AAEA,UAAA,IAAA,CAAA,MAAA,CAAA,KAAA,IAAA,OAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,mBAAA,IAAA,CAAA,MAAA,KAAA,IAAA,CAAA,MAAA;AAAA,WAAA,CAAA;AACA,cAAA,IAAA,GAAA,IAAA,IAAA,CAAA,IAAA,CAAA,SAAA,CAAA;AACA,cAAA,GAAA,GAAA,IAAA,IAAA,EAAA;AACA,UAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,IAAA,CAAA,OAAA,EAAA,CAAA,GAAA,MAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AACA,UAAA,IAAA,CAAA,UAAA,CAAA,KAAA,IAAA,IAAA,CAAA,WAAA,KAAA,GAAA,IAAA,IAAA,CAAA,QAAA,KAAA,CAAA,IAAA,GAAA,GAAA,IAAA,CAAA,OAAA,EAAA;AACA,UAAA,IAAA,CAAA,SAAA,CAAA,KAAA,IAAA,IAAA,CAAA,SAAA,CAAA,WAAA,KAAA,GAAA,IAAA,IAAA,CAAA,SAAA,CAAA,QAAA,KAAA,CAAA,IAAA,GAAA,GAAA,IAAA,CAAA,SAAA,CAAA,OAAA,EAAA;AACA,cAAA,MAAA,GAAA,IAAA,IAAA,CAAA,IAAA,CAAA,QAAA,KAAA,GAAA,GAAA,IAAA,CAAA,OAAA,EAAA,GAAA,GAAA,GAAA,IAAA,CAAA,WAAA,EAAA,CAAA,CAXA,CAWA;;AACA,cAAA,MAAA,GAAA,IAAA,IAAA,CAAA,GAAA,CAAA,QAAA,KAAA,GAAA,GAAA,GAAA,CAAA,OAAA,EAAA,GAAA,GAAA,GAAA,GAAA,CAAA,WAAA,EAAA,CAAA;AACA,cAAA,KAAA,GAAA,QAAA,CAAA,IAAA,CAAA,GAAA,CAAA,MAAA,GAAA,MAAA,IAAA,IAAA,GAAA,EAAA,GAAA,EAAA,GAAA,EAAA,CAAA,CAbA,CAaA;;AACA,UAAA,IAAA,CAAA,IAAA,CAAA,KAAA,IAAA,KAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,IAAA,CAAA,MAAA;AAGA,SAlBA;AAmBA,OArBA,MAqBA;AACA,QAAA,IAAA,CAAA,IAAA,GAAA,KAAA;AACA;;AAEA,aAAA,IAAA;AACA;AAhCA;AAdA,CAAA","sourcesContent":["<template>\r\n    <div class=\"my\">\r\n        <div class=\"userBox\">\r\n            <b-col class=\"user\" xl=\"12\">\r\n                <img :src=\"user.headImg\" alt=\"\">\r\n                <p style=\"margin: 0;margin-top: 20px\">ID:{{user.id}}</p>\r\n            </b-col>\r\n            <h3 style=\"margin-top: 20px;margin-left: 32px\">已借书籍</h3>\r\n            <b-col xl=\"12\" class=\"books\" >\r\n                <h2 style=\"margin:0 auto;margin-top: 100px;color: dimgrey\" v-if=\"!show\">无借阅书籍</h2>\r\n\r\n                <b-col class=\"bookDay\" sm=\"12\" xl=\"4\" v-for=\"item,index in user.lend\" v-if=\"show\">\r\n                    <div class=\"wrap_01\">\r\n                        <CircleProgress\r\n                                :id=\"index\"\r\n                                :width=\"15\"\r\n                                :radius=\"15\"\r\n                                :progress=\"last[index]/item.day*100\"\r\n                                barColor=\"#f34303\"\r\n                                backgroundColor=\"#f0f2f5\"\r\n                                :isAnimation=\"true\"\r\n                        ><p class=\"day\">{{last[index]}}天</p></CircleProgress>\r\n                        <div class=\"bookMsg\">\r\n                            <h5>{{myBook[index][0].name}}</h5>\r\n                            <p>书号：{{myBook[index][0].number}}</p>\r\n                            <p>作者：{{myBook[index][0].Author}}</p>\r\n                            <p>借书日期：{{startTime[index]}}</p>\r\n                            <p>还书日期：{{returnDate[index]}}</p>\r\n                        </div>\r\n                    </div>\r\n                </b-col>\r\n            </b-col>\r\n        </div>\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import CircleProgress  from 'vue-circleprogressbar';\r\n    export default {\r\n        name: \"my\",\r\n        data(){\r\n            return {\r\n                myBook:[],\r\n                returnDate:[],\r\n                startTime:[],\r\n                last:[],\r\n                show:false\r\n            }\r\n        },\r\n        components:{\r\n            CircleProgress\r\n        },\r\n        computed: {\r\n            user: function () {  //通过方法访问\r\n                let user = this.$store.getters.loginMsg.loginUser\r\n                let allbook = this.$store.getters.allBook\r\n                let that = this\r\n                console.log(user.lend.length,user.lend)\r\n                if(user.lend.length>0){\r\n                    that.show = true\r\n                    user.lend.forEach((item,index) => {\r\n\r\n\r\n                            console.log(index)\r\n\r\n                            that.myBook[index] = allbook.filter(book => book.number=== item.bookId)\r\n                            let time = new Date(item.startTime)\r\n                            let now = new Date()\r\n                            time.setDate(Number(time.getDate())+Number(item.day));\r\n                            that.returnDate[index] = time.getFullYear()+'-'+(time.getMonth()+1)+'-'+time.getDate()\r\n                            that.startTime[index] = item.startTime.getFullYear()+'-'+(item.startTime.getMonth()+1)+'-'+item.startTime.getDate()\r\n                            let oDate1 = new Date(time.getMonth()+'-'+time.getDate()+'-'+time.getFullYear()) //转换为9-25-2017格式\r\n                            let oDate2 = new Date(now.getMonth()+'-'+now.getDate()+'-'+now.getFullYear())\r\n                            let iDays = parseInt(Math.abs(oDate1 - oDate2) / 1000 / 60 / 60 / 24) //把相差的毫秒数转换为天数\r\n                            that.last[index] = iDays\r\n                            console.log(that.last[index],that.myBook)\r\n\r\n\r\n                    })\r\n                }else{\r\n                    that.show = false\r\n                }\r\n\r\n                return user\r\n            },\r\n\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .userBox{\r\n        padding: 20px;\r\n        width: 80%;\r\n        margin: 0px auto;\r\n    }\r\n    .userBox img{\r\n        width: 12%;\r\n        border-radius: 12%;\r\n    }\r\n    .user{\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n    .books{\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n    }\r\n    .wrap_01{\r\n        background-color: #fff;\r\n        box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.4);\r\n        border-radius: 15px;\r\n        padding: 5%;\r\n    }\r\n    .content{\r\n        height: 13rem;\r\n    }\r\n    .day{\r\n        font-size: 2.5rem;\r\n        margin: 0px;\r\n    }\r\n    .day,.time{\r\n        text-align: center;\r\n        color:  #f34303;\r\n    }\r\n    .bookMsg{\r\n        margin-top: 15px;\r\n        text-align: center;\r\n    }\r\n    .bookDay{\r\n        margin-top: 20px;\r\n    }\r\n</style>\r\n"],"sourceRoot":"src/views"}]}