{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\src\\views\\find.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\src\\views\\find.vue","mtime":1567916745565},{"path":"C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\web课程设计\\vue-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"find\",\n  data: function data() {\n    return {\n      sortMsg: '',\n      //搜索字符串\n      sortbook: [],\n      //搜索结果\n      show: false,\n      bookMsg: [{\n        img: '',\n        name: '',\n        type: '',\n        number: '',\n        Author: '',\n        remaining: ''\n      }],\n      msg: [],\n      dismissSecs: 1,\n      dismissCountDown: 0,\n      day: 1\n    };\n  },\n  methods: {\n    sort: function sort(msg) {\n      this.sortbook = this.allbook.filter(function (bookmsg) {\n        return bookmsg.number == msg || bookmsg.Author == msg || bookmsg.name.indexOf(msg) != -1;\n      });\n\n      if (this.sortbook.length == 0) {\n        this.show = true;\n      } else {\n        this.show = false;\n      }\n    },\n    showModal: function showModal(id) {\n      this.bookMsg = this.allbook.filter(function (bookmsg) {\n        return bookmsg.number == id;\n      });\n      this.$refs['my-modal'].show();\n    },\n    lendBook: function lendBook() {\n      var _this = this;\n\n      var loginUserMsg = this.$store.getters.loginMsg;\n\n      if (loginUserMsg.loginStatus == '未登录') {\n        this.msg[0] = '请先登录';\n        this.msg[1] = 'danger';\n        this.dismissCountDown = this.dismissSecs; //弹出警告框\n      } else {\n        var s = true;\n        loginUserMsg.loginUser.lend.forEach(function (item) {\n          if (item.bookId == _this.bookMsg[0].number) {\n            _this.msg[0] = '你已借用此书籍';\n            _this.msg[1] = 'warning';\n            _this.dismissCountDown = _this.dismissSecs; //弹出警告框\n\n            s = false;\n            return;\n          }\n        });\n        console.log(s);\n\n        if (s) {\n          this.msg[0] = '借用成功';\n          this.msg[1] = 'success';\n          this.dismissCountDown = this.dismissSecs; //弹出警告框\n\n          var lendBook = {\n            bookId: this.bookMsg[0].number,\n            startTime: new Date(),\n            day: this.day\n          };\n          this.$store.commit('lendBook', lendBook);\n        }\n      }\n    }\n  },\n  computed: {\n    allbook: function allbook() {\n      //通过方法访问\n      return this.$store.getters.allBook;\n    }\n  }\n};",{"version":3,"sources":["find.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"sort w-75\">\r\n            <b-input-group class=\"mt-3\">\r\n                <template>\r\n                    <b-input-group-text @click=\"sort(sortMsg)\"><img src=\"../assets/sort.png\" alt=\"\"></b-input-group-text>\r\n                </template>\r\n                <b-form-input v-model=\"sortMsg\" @keyup.enter=\"sort(sortMsg)\" placeholder=\"请输入关键字/书名/书号/作者\"></b-form-input>\r\n            </b-input-group>\r\n        </div>\r\n        <div style=\"display: flex;flex-wrap: wrap;width: 90%;margin: 0 auto;margin-bottom: 50px\">\r\n            <h4 v-show=\"show\" style=\"margin: 0 auto\">没有找到相关信息</h4>\r\n            <b-col @click=\"showModal(item.number)\" sm=\"12\" xl=\"4\" md=\"6\" v-for=\"item in sortbook\" :key=\"item.number\" style=\"display: flex;margin-top: 15px;padding-left: 10%\">\r\n                <div style=\"width: 30% \" class=\"arrow\"><img :src=\"item.img\" alt=\"\" class=\"imgs\"></div>\r\n                <div style=\"margin-left: 20px\" class=\"arrow\">\r\n                    <h4>{{item.name}}</h4>\r\n                    <p style=\"margin: 4px\">{{item.type}}类</p>\r\n                    <p style=\"margin: 4px\">书号：{{item.number}}</p>\r\n                    <p style=\"margin: 4px\">作者：{{item.Author}}</p>\r\n                    <p style=\"margin: 4px\">剩余：{{item.remaining}}</p>\r\n                </div>\r\n            </b-col>\r\n        </div>\r\n        <b-modal ref=\"my-modal\" hide-footer title=\"图书信息\">\r\n            <b-alert :show=\"dismissCountDown\" dismissible :variant=\"msg[1]\" @dismissed=\"dismissCountDown=0\" fade>\r\n                <p style=\"margin: 0px\">{{msg[0]}}</p>\r\n            </b-alert><!--警告框-->\r\n            <b-col  sm=\"12\"   style=\"display: flex;margin-top: 15px;flex-wrap: wrap\">\r\n                <b-col cols=\"12\" sm=\"4\" xl=\"5\" style=\"margin-bottom: 20px\"><img :src=\"bookMsg[0].img\" alt=\"\" class=\"imgs\"></b-col>\r\n                <b-col cols=\"12\" sm=\"8\" xl=\"7\">\r\n                    <h4>{{bookMsg[0].name}}</h4>\r\n                    <p style=\"margin: 4px\">{{bookMsg[0].type}}类</p>\r\n                    <p style=\"margin: 4px\">书号：{{bookMsg[0].number}}</p>\r\n                    <p style=\"margin: 4px\">作者：{{bookMsg[0].Author}}</p>\r\n                    <p style=\"margin: 4px\">剩余：{{bookMsg[0].remaining}}</p>\r\n                    <p style=\"margin: 4px\">简介：{{bookMsg[0].Introduction}}</p>\r\n                </b-col>\r\n                <b-input-group style=\"margin: 0px 16px;display: -webkit-box;\">\r\n\r\n                    <b-form-input type=\"number\" min=\"1.00\" style=\"border-radius: 0.25rem;\" v-model=\"day\"></b-form-input>\r\n\r\n                    <b-input-group-append>\r\n                        <p style=\"    margin: 0px;width: 74px;height: calc(2.5em + 0.75rem + 8px);color: #070707;position: absolute;right: 98px;z-index: 10;text-align: center;line-height: calc(2.5em + 0.75rem + 8px);\">天</p>\r\n                        <b-button variant=\"info\" block  @click=\"lendBook()\">借用书籍</b-button>\r\n                    </b-input-group-append>\r\n                </b-input-group>\r\n\r\n            </b-col>\r\n        </b-modal>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"find\",\r\n        data(){\r\n            return {\r\n                sortMsg:'',//搜索字符串\r\n                sortbook:[],//搜索结果\r\n                show:false,\r\n                bookMsg:[{img:'',name:'',type:'',number:'',Author:'',remaining:''}],\r\n                msg:[],\r\n                dismissSecs: 1,\r\n                dismissCountDown: 0,\r\n                day:1\r\n            }\r\n        },\r\n        methods:{\r\n            sort:function (msg) {\r\n                this.sortbook = this.allbook.filter( bookmsg => {\r\n                    return  bookmsg.number == msg || bookmsg.Author == msg || bookmsg.name.indexOf(msg) != -1\r\n                })\r\n                if(this.sortbook.length == 0){\r\n                    this.show = true\r\n                }\r\n                else{\r\n                    this.show = false\r\n                }\r\n            },\r\n            showModal:function (id) {\r\n                this.bookMsg = this.allbook.filter( bookmsg => {\r\n                    return  bookmsg.number == id\r\n                })\r\n                this.$refs['my-modal'].show()\r\n            },\r\n            lendBook:function () {\r\n                let loginUserMsg = this.$store.getters.loginMsg\r\n                if (loginUserMsg.loginStatus == '未登录'){\r\n                    this.msg[0] = '请先登录'\r\n                    this.msg[1] = 'danger'\r\n                    this.dismissCountDown = this.dismissSecs//弹出警告框\r\n                }else{\r\n                    var s = true\r\n                    loginUserMsg.loginUser.lend.forEach(item => {\r\n                            if(item.bookId == this.bookMsg[0].number){\r\n                                this.msg[0] = '你已借用此书籍'\r\n                                this.msg[1] = 'warning'\r\n                                this.dismissCountDown = this.dismissSecs//弹出警告框\r\n                                s = false\r\n                                return\r\n                            }\r\n                     })\r\n                    console.log(s)\r\n                    if(s){\r\n                        this.msg[0] = '借用成功'\r\n                        this.msg[1] = 'success'\r\n                        this.dismissCountDown = this.dismissSecs//弹出警告框\r\n                        let lendBook = {bookId:this.bookMsg[0].number,startTime:new Date,day:this.day}\r\n                        this.$store.commit('lendBook',lendBook)\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        computed: {\r\n            allbook: function () {  //通过方法访问\r\n                return this.$store.getters.allBook;\r\n            }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    img{\r\n        width: 100%;\r\n    }\r\n    .imgs{\r\n        box-shadow: 0px 0px 5px 0px;\r\n        border-radius: 10px;\r\n    }\r\n    .sort{\r\n        margin: 75px auto 17px auto;\r\n    }\r\n    .input-group-text{\r\n        border: 0px;\r\n        position: absolute;\r\n        z-index: 10;\r\n        right: 22px;\r\n        width: 3.5em;\r\n        height: calc(2.5em + 0.75rem + 8px);\r\n\r\n    }\r\n    .input-group > .form-control{\r\n        width: 100%;\r\n    }\r\n    .form-control{\r\n        height: calc(2.5em + 0.75rem + 8px);\r\n        border-radius: 2.25rem;\r\n        padding-right: calc(3.5em + 25px);\r\n        padding-left: 25px;\r\n    }\r\n    .input-group > .form-control:not(:last-child),.input-group > .form-control:not(:first-child){\r\n        border-radius: 2.25rem;\r\n    }\r\n    .arrow{\r\n        cursor:pointer\r\n    }\r\n</style>\r\n"],"sourceRoot":"src/views"}]}